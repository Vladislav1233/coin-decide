(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{160:function(e,t,a){e.exports=a.p+"static/media/arrow-side.62ddfa37.svg"},271:function(e,t,a){e.exports=a.p+"static/media/coin-v.c9f2678a.mp4"},272:function(e,t,a){e.exports=a.p+"static/media/setting.a33d9333.svg"},273:function(e,t,a){e.exports=a.p+"static/media/list.d1a23cee.svg"},274:function(e,t,a){e.exports=a.p+"static/media/swipe.a316d86e.svg"},275:function(e,t,a){e.exports=a.p+"static/media/check-circle.15ee7bc4.svg"},277:function(e,t,a){e.exports=a.p+"static/media/beer.296e7a16.svg"},279:function(e,t){e.exports="data:image/png;base64,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"},280:function(e,t,a){e.exports=a.p+"static/media/taxi.08eb5de9.svg"},281:function(e,t,a){e.exports=a.p+"static/media/plug-for-bar.740a0b14.jpg"},283:function(e,t,a){e.exports=a.p+"static/media/phones.8506d38a.png"},284:function(e,t,a){e.exports=a.p+"static/media/LogoNew.17f69ab7.svg"},289:function(e,t,a){e.exports=a(544)},294:function(e,t,a){},480:function(e,t,a){},482:function(e,t,a){},483:function(e,t,a){},484:function(e,t,a){},485:function(e,t,a){},486:function(e,t,a){},494:function(e,t,a){},495:function(e,t,a){},496:function(e,t,a){},497:function(e,t,a){},498:function(e,t,a){},499:function(e,t,a){},500:function(e,t,a){},501:function(e,t,a){},502:function(e,t,a){},504:function(e,t,a){},505:function(e,t,a){},506:function(e,t,a){e.exports=a.p+"static/media/logo.0cf28634.png"},507:function(e,t,a){},513:function(e,t,a){},544:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(62),c=a.n(i),o=(a(294),a(4)),l=a(5),s=a(7),d=a(6),u=a(8),m=a(22),p=a(547),h=a(268),b=a(39),f=a(30),v=Object(f.a)(),g=function(e,t){var a={name:"\u041c\u043e\u0441\u043a\u0432\u0430",name_id:"moscow"};return fetch("https://suggestions.dadata.ru/suggestions/api/4_1/rs/geolocate/address?lat=".concat(e,"&lon=").concat(t),{headers:{Accept:"application/json",Authorization:"Token 5e22eb1e41d4a638fde5e97b229881d65e6f23f2"}}).then(function(e){return e.json()}).then(function(e){if(console.log(e),!e.length)return a;switch(e.suggestions[0].data.city){case"\u0423\u043b\u044c\u044f\u043d\u043e\u0432\u0441\u043a":return{name:"\u0423\u043b\u044c\u044f\u043d\u043e\u0432\u0441\u043a",name_id:"ulyanovsk"};default:return a}})},E=a(21),_=function(e,t){return function(a,n,r){var i=(0,r.getFirestore)(),c=n();c.firebase.auth.uid&&i.update({collection:"users",doc:c.firebase.auth.uid},{default_city:{name:e,name_id:t}}),a({type:"CHANGE_CITY_SUCCESS",payload:{nameCity:e,valueCity:t}})}},C={nameCity:"",valueCity:""},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_CITY_SUCCESS":return Object(E.a)({},e,{nameCity:t.payload.nameCity,valueCity:t.payload.valueCity});default:return e}},O=a(269),N=a.n(O),j=a(159),w=(a(333),a(270)),I=a(271),k=a.n(I),S=a(272),A=a.n(S),B=a(273),R=a.n(B),x=a(274),U=a.n(x),M=a(160),P=a.n(M),D=a(35),T=function(e,t){return function(a,n,r){var i=r.getFirestore;r.getFirebase;i().add({collection:"promocodes",doc:e,subcollections:[{collection:"content"}]},t).then(function(){G()})}},G=function(){return function(e){e({type:"CLEAR_WON_PROMOCODE"})}},L={promocodesForUser:[],promocodeWon:{}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PROMOCODES_FOR_USER_SUCCESS":return Object(E.a)({},e,{promocodesForUser:t.payload});case"SAVE_WINNING_PROMOCODE_IN_STORE":return Object(E.a)({},e,{promocodeWon:t.payload});case"CLEAR_WON_PROMOCODE":return Object(E.a)({},e,{promocodeWon:{}});default:return e}},z=a(33),W=a(275),H=a.n(W),Z=(a(480),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={imageUrl:""},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(z.getFirebase)().storage().ref().child(this.props.photo).getDownloadURL().then(function(t){e.setState({imageUrl:t})},function(e){console.log("Promocode Item Error Download Image")})}},{key:"render",value:function(){var e=this.props,t=e.name_bar,a=e.prize,n=e.is_check,i=e.duration_action,c=e.id,o=e.bar_id,l=e.code,s=e.qr_code,d=this.state.imageUrl;return r.a.createElement(D.a,{to:{pathname:"/promocode/".concat(c),state:{barId:o,code:l,qrCode:s,prize:a,imageUrl:d}},className:"b-promocode-item",style:{backgroundImage:"url(".concat(d,")")}},n&&r.a.createElement("div",{className:"b-promocode-item__check-wrapper"},r.a.createElement("img",{src:H.a,alt:""})),r.a.createElement("div",{className:"b-promocode-item__head"},r.a.createElement("div",{className:"b-promocode-item__name-place"},t),r.a.createElement("div",{className:"b-promocode-item__name-prize"},a.description)),r.a.createElement("div",{className:"b-promocode-item__footer"},r.a.createElement("div",{className:"b-promocode-item__date"},"\u0414\u0435\u0439\u0441\u0442\u0432\u0443\u0435\u0442 \u0434\u043e ",i)))}}]),t}(n.Component)),q=(a(482),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.uid&&this.props.getPromocodesForUser(this.props.auth.uid)}},{key:"render",value:function(){var e=this.props,t=e.auth,a=e.promocodes;return r.a.createElement("ul",{className:"b-promocode-list"},t.uid?a&&a.length>0?a.map(function(e,t){return r.a.createElement("li",{key:t,className:"b-promocode-list__item"},r.a.createElement(Z,{name_bar:e.name_bar,prize:e.prize,is_check:e.is_check,duration_action:e.prize.expires,id:e.id,bar_id:e.bar_id,code:e.code,qr_code:e.qr_code,photo:e.photo}))}):r.a.createElement("li",{className:"b-promocode-list__empty"},"\u0423 \u0432\u0430\u0441 \u0435\u0449\u0451 \u043d\u0435\u0442 \u043f\u0440\u043e\u043c\u043e\u043a\u043e\u0434\u043e\u0432. \u0411\u0440\u043e\u0441\u044c\u0442\u0435 \u043c\u043e\u043d\u0435\u0442\u043a\u0443, \u0447\u0442\u043e\u0431\u044b \u0432\u044b\u0438\u0433\u0440\u0430\u0442\u044c \u0441\u043a\u0438\u0434\u043a\u0443 \u0432 \u0431\u0430\u0440\u0435."):r.a.createElement("li",{className:"b-promocode-list__registration"},r.a.createElement(D.a,{to:"/signin"},"\u0412\u043e\u0439\u0434\u0438\u0442\u0435"),r.a.createElement("div",{className:"b-promocode-list__help"},"\u0447\u0442\u043e\u0431\u044b \u0432\u0438\u0434\u0435\u0442\u044c \u0432\u0441\u0435 \u0441\u0432\u043e\u0438 \u043f\u0440\u043e\u043c\u043e\u043a\u043e\u0434\u044b")))}}]),t}(n.Component)),Y=Object(m.b)(function(e){var t=e.firebase;return{promocodes:e.promocodes.promocodesForUser,auth:t.auth}},function(e){return{getPromocodesForUser:function(t){return e(function(e){return function(t,a,n){var r=n.getFirestore;n.getFirebase,r().get({collection:"promocodes",doc:e,subcollections:[{collection:"content"}]}).then(function(){var e=a().firestore.ordered.promocodes[0].content;t({type:"GET_PROMOCODES_FOR_USER_SUCCESS",payload:e})},function(e){console.log(e)})}}(t))}}})(q),Q=a(29),V=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t=e.target.value,n=e.nativeEvent.target.selectedIndex;a.props.changeCity(e.nativeEvent.target[n].text,t)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.head,a=e.content,n=e.select,i=e.valueCity;return r.a.createElement("div",{className:"b-setting-list__item"},!!t&&r.a.createElement("div",{className:"b-setting-list__head"},!!t.title&&r.a.createElement("div",{className:"b-setting-list__title"},t.title),!!t.additional&&r.a.createElement("div",{className:"b-setting-list__additional-title"},t.additional)),!!a&&!!a.length&&a.map(function(e,t){return e.name||e.link?r.a.createElement("div",{key:"settingContent-".concat(t),className:"b-setting-list__content",onClick:e.onClick?e.onClick:function(){}},!!e.name&&r.a.createElement("div",{className:"b-setting-list__name"},e.name),!!e.link&&r.a.createElement("a",{href:e.href,className:"b-setting-list__name b-setting-list__name--link"},e.link),!!e.description&&r.a.createElement("div",{className:"b-setting-list__description"},e.description)):null}),!!n&&r.a.createElement("div",{className:"b-setting-list__content"},r.a.createElement("select",{name:"valueCity",value:i,className:"b-setting-list__name b-setting-list__name--select",onChange:this.handleChange},r.a.createElement("option",{value:"ulyanovsk"},"\u0423\u043b\u044c\u044f\u043d\u043e\u0432\u0441\u043a"),r.a.createElement("option",{value:"moscow"},"\u041c\u043e\u0441\u043a\u0432\u0430"),r.a.createElement("option",{value:"saint_petersburg"},"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433")),!!n.description&&r.a.createElement("div",{className:"b-setting-list__description"},n.description)))}}]),t}(n.Component),X=function(e){return 0==Object.keys(e).length},J={authError:null},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return Object(E.a)({},e,{authError:t.payload});case"LOGIN_SUCCESS":case"LOGOUT_SUCCESS":return Object(E.a)({},e,{authError:null});case"SIGNUP_SUCCESS":return console.log("SIGNUP_SUCCESS"),Object(E.a)({},e,{authError:null});case"SIGNUP_ERROR":return console.log("SIGNUP_ERROR"),console.log(t.payload.message),Object(E.a)({},e,{authError:t.payload.message});default:return e}},$=(a(483),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.auth,a=e.signOut,n=e.userData,i=e.changeCity,c=e.valueCity;return r.a.createElement("div",{className:"b-setting-list"},!!t.uid&&r.a.createElement(V,{head:{title:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"},content:[{name:"".concat(n.length?n[0].firstName:""," ").concat(n.length?n[0].lastName:""),description:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u043c\u044f"}]}),r.a.createElement(V,{head:{title:"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0435"},select:{description:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0433\u043e\u0440\u043e\u0434"},changeCity:i,valueCity:c}),r.a.createElement(V,{head:{title:"\u041e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438",additional:"v0.2.56 beta"},content:[{name:"\u041a\u0430\u043a \u044d\u0442\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442?",description:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438"},{name:"\u0421\u043f\u0438\u0441\u043e\u043a \u0431\u0430\u0440\u043e\u0432",description:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0431\u0430\u0440\u044b \u0443\u0447\u0430\u0432\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u0432 \u0438\u0433\u0440\u0435"},{link:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043d\u0430\u043c",href:"mailto:iamed73@yandex.ru",description:"iAmed73@yandex.ru"}]}),t.uid?r.a.createElement("button",{className:"b-setting-list__logout",onClick:a},r.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 4C4.73478 4 4.48043 4.10536 4.29289 4.29289C4.10536 4.48043 4 4.73478 4 5V19C4 19.2652 4.10536 19.5196 4.29289 19.7071C4.48043 19.8946 4.73478 20 5 20H9C9.55228 20 10 20.4477 10 21C10 21.5523 9.55228 22 9 22H5C4.20435 22 3.44129 21.6839 2.87868 21.1213C2.31607 20.5587 2 19.7957 2 19V5C2 4.20435 2.31607 3.44129 2.87868 2.87868C3.44129 2.31607 4.20435 2 5 2H9C9.55228 2 10 2.44772 10 3C10 3.55228 9.55228 4 9 4H5Z",fill:"#96A491"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.2929 6.29289C15.6834 5.90237 16.3166 5.90237 16.7071 6.29289L21.7071 11.2929C22.0976 11.6834 22.0976 12.3166 21.7071 12.7071L16.7071 17.7071C16.3166 18.0976 15.6834 18.0976 15.2929 17.7071C14.9024 17.3166 14.9024 16.6834 15.2929 16.2929L19.5858 12L15.2929 7.70711C14.9024 7.31658 14.9024 6.68342 15.2929 6.29289Z",fill:"#96A491"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 12C8 11.4477 8.44772 11 9 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H9C8.44772 13 8 12.5523 8 12Z",fill:"#96A491"})),r.a.createElement("span",null,"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u043f\u0440\u043e\u0444\u0438\u043b\u044f")):r.a.createElement("div",{className:"b-setting-list__registration"},r.a.createElement(D.a,{to:"/signin"},"\u0412\u043e\u0439\u0442\u0438")))}}]),t}(n.Component)),ee=Object(Q.compose)(Object(m.b)(function(e){var t=e.firebase,a=e.firestore,n=e.users;return{auth:t.auth,userData:!!a.ordered.users&&!!a.ordered.users.length&&a.ordered.users.filter(function(e){return t.auth.uid===e.id}),valueCity:n.valueCity}},function(e){return{signOut:function(){return e(function(e,t,a){(0,a.getFirebase)().auth().signOut().then(function(){e({type:"LOGOUT_SUCCESS"})}).catch(function(t){e({type:"LOGOUT_ERROR"}),alert("\u041e\u0448\u0438\u0431\u043a\u0430, \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a")})})},changeCity:function(t,a){return e(_(t,a))}}}),Object(z.firestoreConnect)(function(e){return[{collection:"users",doc:e.auth.uid}]}))($),te=(a(484),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={flipEnded:!1,isCoinToss:!1},a.nextSlide=function(){a.slider.slickNext()},a.previousSlide=function(){a.slider.slickPrev()},a.onSwipedUp=function(){a.setState({isCoinToss:!0}),a.player.play()},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.player.subscribeToStateChange(this.handleStateChange.bind(this)),this.player.play(),this.player.pause()}},{key:"handleStateChange",value:function(e,t){e.ended&&this.props.stopFlipping()}},{key:"render",value:function(){var e=this,t=this.state.isCoinToss;return r.a.createElement("div",{className:"b-screen-coin ".concat(t?"is-coin-toss":"")},r.a.createElement(N.a,Object.assign({ref:function(t){return e.slider=t}},{dots:!0,infinity:!1,adaptiveHeight:!0,initialSlide:1,arrows:!1,fade:!0,slidesToShow:1,slidesToScroll:1}),r.a.createElement("div",{className:"b-screen-coin__slide"},r.a.createElement("h2",{className:"b-screen-coin__title"},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),r.a.createElement("div",{className:"b-coin-head"},r.a.createElement("div",{className:"b-coin-head__item b-coin-head__item--right",onClick:this.nextSlide},r.a.createElement("div",{className:"b-coin-head__icon b-coin-head__icon--right"},r.a.createElement("img",{src:P.a,alt:""})))),r.a.createElement(ee,null)),r.a.createElement("div",{className:"b-screen-coin__slide"},r.a.createElement("div",{className:"b-coin-head ".concat(t?"is-hide":"")},r.a.createElement("button",{className:"b-coin-head__item",type:"button",onClick:this.previousSlide},r.a.createElement("div",{className:"b-coin-head__icon"},r.a.createElement("img",{src:A.a,alt:""})),r.a.createElement("span",{className:"b-coin-head__btn-title"},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")),r.a.createElement("button",{className:"b-coin-head__item",type:"button",onClick:this.nextSlide},r.a.createElement("div",{className:"b-coin-head__icon"},r.a.createElement("img",{src:R.a,alt:""})),r.a.createElement("span",{className:"b-coin-head__btn-title"},"\u041c\u043e\u0438 \u043a\u043e\u0434\u044b"))),r.a.createElement(w.a,{className:"b-screen-coin__swipeable",onSwipedUp:this.onSwipedUp,preventDefaultTouchmoveEvent:!0},r.a.createElement("div",{className:"b-screen-coin__control-image ".concat(t?"is-hide":"")},r.a.createElement("img",{src:U.a,alt:""}),r.a.createElement("div",null)),r.a.createElement(j.Player,{ref:function(t){e.player=t},fluid:!1,width:"100%",height:"100%",playsInline:!0,type:"video/mp4",preload:"auto",src:k.a},r.a.createElement(j.ControlBar,{disableCompletely:!0})))),r.a.createElement("div",{className:"b-screen-coin__slide"},r.a.createElement("h2",{className:"b-screen-coin__title"},"\u041c\u043e\u0438 \u043f\u0440\u043e\u043c\u043e\u043a\u043e\u0434\u044b"),r.a.createElement("div",{className:"b-coin-head"},r.a.createElement("div",{className:"b-coin-head__item",onClick:this.previousSlide},r.a.createElement("div",{className:"b-coin-head__icon"},r.a.createElement("img",{src:P.a,alt:""})))),r.a.createElement(Y,null))))}}]),t}(n.Component)),ae=(a(485),a(277)),ne=a.n(ae),re=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.description;return r.a.createElement("div",{className:"b-sale"},r.a.createElement("div",{className:"b-sale__info"},r.a.createElement("div",{className:"b-sale__name"},e),r.a.createElement("div",{className:"b-sale__type"},"\u041f\u0440\u0438\u0437")),r.a.createElement("div",{className:"b-sale__icon"},r.a.createElement("img",{src:ne.a,alt:"\u0411\u043e\u043a\u0430\u043b \u043f\u0438\u0432\u0430"})))}}]),t}(n.Component),ie=(a(486),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.endWorkTime,a=e.address,n=e.name,i=e.descriptionSale,c=e.urlImage;return r.a.createElement("div",{className:"b-card"},r.a.createElement("div",{className:"b-card__wrapper"},r.a.createElement("div",{className:"b-card__image-wrapper"},r.a.createElement("img",{className:"b-card__image",src:c,alt:""})),r.a.createElement("div",{className:"b-card__info-bar"},r.a.createElement("div",{className:"b-card__address"},"\u041e\u0442\u043a\u0440\u044b\u0442\u043e \u0434\u043e ",t),r.a.createElement("div",{className:"b-card__address"},a),r.a.createElement("h1",{className:"b-card__name"},n)),!!i&&r.a.createElement(re,{description:i})))}}]),t}(n.Component)),ce=a(157),oe=a.n(ce),le=a(278),se=a.n(le),de=(a(490),a(491),a(492),a(493),a(494),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={activeIndex:0},a.handleActiveIndexUpdate=function(e){a.setState({activeIndex:e}),a.props.getTabIndex&&a.props.getTabIndex(e)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.tabs;return r.a.createElement("div",{className:"b-tab-bar"},r.a.createElement(se.a,{activeIndex:this.state.activeIndex,handleActiveIndexUpdate:this.handleActiveIndexUpdate},e.map(function(e){return r.a.createElement(oe.a,{key:e},r.a.createElement("span",{className:"mdc-tab__text-label"},e))})))}}]),t}(n.Component)),ue=(a(495),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.onClick;return r.a.createElement("div",{className:"b-arrow-to",onClick:e},r.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.70711 1.70711C9.09763 1.31658 9.09763 0.683417 8.70711 0.292893C8.31658 -0.0976311 7.68342 -0.0976311 7.29289 0.292893L0.292893 7.29289C-0.0976311 7.68342 -0.0976311 8.31658 0.292893 8.70711L7.29289 15.7071C7.68342 16.0976 8.31658 16.0976 8.70711 15.7071C9.09763 15.3166 9.09763 14.6834 8.70711 14.2929L3.41421 9H15C15.5523 9 16 8.55229 16 8C16 7.44772 15.5523 7 15 7H3.41421L8.70711 1.70711Z"})))}}]),t}(n.Component)),me=a(279),pe=a.n(me),he=(a(496),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isAuth,a=e.code,n=e.qrCode;return r.a.createElement("div",{className:"b-code"},r.a.createElement("div",{className:"b-code__value"},"Code: ",a),!!n&&r.a.createElement("div",{className:"b-code__qr-wrapper"},r.a.createElement("img",{src:pe.a,alt:"qr \u043a\u043e\u0434"})),r.a.createElement("div",{className:"b-code__footer"},r.a.createElement("div",{className:"b-code__note"},r.a.createElement("span",null,"\u041f\u043e\u043a\u0430\u0436\u0438 QR-code \u0438\u043b\u0438 \u043f\u0440\u043e\u0434\u0438\u043a\u0442\u0443\u0439 \u043a\u043e\u0434 \u0431\u0430\u0440\u043c\u0435\u043d\u0443 \u0438 \u043f\u043e\u043b\u0443\u0447\u0438 \u0441\u043a\u0438\u0434\u043a\u0443")),!t&&r.a.createElement(D.a,{to:"/signup",className:"b-code__auth"},r.a.createElement("span",null,"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0441\u044f,")," \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u043f\u043e\u0442\u0435\u0440\u044f\u0442\u044c!")))}}]),t}(n.Component));he.defaultProps={isAuth:!1};var be=he,fe=a(107),ve=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.geo;return r.a.createElement("div",{style:{height:"calc(100% - 49px)"}},r.a.createElement(fe.c,null,r.a.createElement(fe.a,{defaultState:{center:[e.latitude,e.longitude],zoom:17},width:"100%",height:"100%"},r.a.createElement(fe.b,{geometry:[e.latitude,e.longitude]}))))}}]),t}(n.Component),ge=a(280),Ee=a.n(ge),_e=(a(497),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("a",{href:"/",title:"\u0412\u044b\u0437\u0432\u0430\u0442\u044c \u0442\u0430\u043a\u0441\u0438",className:"b-taxi-button"},r.a.createElement("img",{className:"b-taxi-button__icon-taxi",src:Ee.a,alt:"\u0418\u043a\u043e\u043d\u043a\u0430 \u0442\u0430\u043a\u0441\u0438"}),r.a.createElement("span",{className:"b-taxi-button__text"},"\u0412\u044b\u0437\u0432\u0430\u0442\u044c \u0442\u0430\u043a\u0441\u0438"))}}]),t}(n.Component)),Ce=(a(498),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"b-badge"},this.props.children)}}]),t}(n.Component)),ye=a(105),Oe=(a(499),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.number,t=Object(ye.a)(new Array(5)),a=t.length-e;return r.a.createElement("div",{className:"b-rating"},t.map(function(e,t){return t<a?r.a.createElement("span",null,"\u2606"):r.a.createElement("span",{className:"checked"},"\u2606")}))}}]),t}(n.Component)),Ne=(a(500),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.text,a=e.src;return r.a.createElement("div",{className:"b-avatar"},!!t&&t,!!a&&r.a.createElement("img",{src:a,alt:""}))}}]),t}(n.Component)),je=(a(501),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.reviews,a=e.barId,n=t.find(function(e){return e.id===a}),i=new Date;return n?r.a.createElement("div",{className:"b-review"},r.a.createElement("div",{className:"b-review__head"},r.a.createElement(Ce,null,n.final_grade),r.a.createElement("div",{className:"b-review__category"},r.a.createElement("span",null,"\u0411\u0430\u0440"),r.a.createElement("span",null,"\u041f\u0430\u0431"))),r.a.createElement("ul",{className:"b-review__list"},n.reviews.map(function(e,t){return r.a.createElement("li",{className:"b-review__item",key:t},r.a.createElement("div",{className:"b-review__review"},r.a.createElement("div",{className:"b-review__review-person"},r.a.createElement("div",{className:"b-review__avatar"},r.a.createElement(Ne,{src:"https://mhealth.ru/media/images/2019/3/13/033a4223a2a34775b354411666ff04ef.width-630.jpg"}),r.a.createElement("div",{className:"b-review__name"},"".concat(e.author.firstName," ").concat(e.author.lastName)))),r.a.createElement("div",{className:"b-review__rating"},r.a.createElement(Oe,{number:Math.trunc(e.rate)}),r.a.createElement("div",{className:"b-review__rating-date"},function(e){i.setTime(1e3*e);var t=i.getMonth()<9?"0".concat(i.getMonth()+1):i.getMonth()+1;return"".concat(i.getDate(),".").concat(t,".").concat(i.getFullYear())}(e.date.seconds))),r.a.createElement("div",{className:"b-review__text"},e.review)))}))):"\u041f\u043e\u043a\u0430 \u043d\u0438\u043a\u0442\u043e \u043d\u0435 \u043e\u0441\u0442\u0430\u0432\u0438\u043b \u043e\u0442\u0437\u044b\u0432."}}]),t}(n.Component)),we=(a(502),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={tabIndex:0},a.handleActiveIndexUpdate=function(e){a.setState({tabIndex:e})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isAuth,a=e.endWorkTime,i=e.address,c=e.geo,o=e.name,l=e.prize,s=e.code,d=e.qrCode,u=e.reviews,m=e.urlImage,p=e.backToStartScreen,h=e.barId,b=this.state.tabIndex,f=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(ie,{name:o,address:i,endWorkTime:a,descriptionSale:l.description,urlImage:m}),r.a.createElement("div",{className:"b-screen-bar__tab-content"},X(l)?r.a.createElement("div",{style:{marginTop:"30px"}},"\u0422\u0435\u0431\u044f \u0443\u0436\u0435 \u0436\u0434\u0443\u0442 \u0437\u0434\u0435\u0441\u044c, \u043f\u0440\u0438\u0445\u043e\u0434\u0438!"):r.a.createElement(be,{isAuth:t,code:s,qrCode:d})))};return r.a.createElement("div",{className:"b-screen-bar"},r.a.createElement("div",{className:"b-screen-bar__nav"},r.a.createElement("div",{className:"b-screen-bar__nav-arrow"},r.a.createElement(ue,{onClick:p})),r.a.createElement("div",{className:"b-screen-bar__nav-tab-bar"},r.a.createElement(de,{getTabIndex:this.handleActiveIndexUpdate,tabs:["\u041a\u043e\u0434","\u041e\u0442\u0437\u044b\u0432\u044b","\u041a\u0430\u0440\u0442\u0430"]})),r.a.createElement("div",{className:"b-screen-bar__nav-share"},r.a.createElement("div",{className:"b-screen-bar__share-icon"},r.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 3C16.8954 3 16 3.89543 16 5C16 6.10457 16.8954 7 18 7C19.1046 7 20 6.10457 20 5C20 3.89543 19.1046 3 18 3ZM14 5C14 2.79086 15.7909 1 18 1C20.2091 1 22 2.79086 22 5C22 7.20914 20.2091 9 18 9C15.7909 9 14 7.20914 14 5Z",fill:"white"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 10C4.89543 10 4 10.8954 4 12C4 13.1046 4.89543 14 6 14C7.10457 14 8 13.1046 8 12C8 10.8954 7.10457 10 6 10ZM2 12C2 9.79086 3.79086 8 6 8C8.20914 8 10 9.79086 10 12C10 14.2091 8.20914 16 6 16C3.79086 16 2 14.2091 2 12Z",fill:"white"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 17C16.8954 17 16 17.8954 16 19C16 20.1046 16.8954 21 18 21C19.1046 21 20 20.1046 20 19C20 17.8954 19.1046 17 18 17ZM14 19C14 16.7909 15.7909 15 18 15C20.2091 15 22 16.7909 22 19C22 21.2091 20.2091 23 18 23C15.7909 23 14 21.2091 14 19Z",fill:"white"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.72599 13.0065C8.00406 12.5293 8.6163 12.3679 9.09348 12.646L15.9235 16.626C16.4007 16.9041 16.5621 17.5163 16.284 17.9935C16.0059 18.4707 15.3937 18.6321 14.9165 18.354L8.08652 14.374C7.60934 14.0959 7.44793 13.4837 7.72599 13.0065Z",fill:"white"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.2737 6.00597C16.5521 6.48297 16.391 7.09532 15.914 7.37369L9.09403 11.3537C8.61703 11.6321 8.00468 11.471 7.72631 10.994C7.44795 10.517 7.60897 9.90468 8.08597 9.62631L14.906 5.64631C15.383 5.36795 15.9953 5.52897 16.2737 6.00597Z",fill:"white"}))))),r.a.createElement(function(){switch(b){case 0:return f();case 1:return r.a.createElement("div",{className:"b-screen-bar__tab-content b-screen-bar__tab-content--full"},r.a.createElement("h2",{className:"b-screen-bar__tab-title"},o),r.a.createElement(je,{reviews:u,barId:h}));case 2:return r.a.createElement("div",{className:"b-screen-bar__tab-content b-screen-bar__tab-content--full"},r.a.createElement("h2",{className:"b-screen-bar__tab-title"},o),r.a.createElement(ve,{geo:c}),r.a.createElement("div",{className:"b-screen-bar__taxi"},r.a.createElement(_e,null)));default:return f()}},null))}}]),t}(n.Component)),Ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=t+Math.random()*(e+1-t);return Math.floor(a)},ke=function e(t){if(!t)return t;var a=Object.keys(t);if(t[a[a.length*Math.random()<<0]])return a[a.length*Math.random()<<0];e(t)},Se=a(281),Ae=a.n(Se),Be=function(e){return console.log(e),function(t,a,n){(0,n.getFirestore)().get({collection:"bars_id",doc:e}).then(function(){var n=a().firestore.ordered.bars_id.filter(function(t){return t.id===e})[0].content,r=n[Ie(n.length-1)].bar_id;console.log(r),t(function(e){return function(t,a,n){var r=n.getFirestore,i=n.getFirebase,c=r();t({type:"SAVE_BAR_ID_QUERY",payload:{targetBarId:e}}),c.get({collection:"bars",doc:e}).then(function(){var n=function(e){i().storage().ref().child(e).getDownloadURL().then(function(e){t({type:"GET_URL_BAR_IMAGE_SUCCESS",payload:e})},function(e){t({type:"GET_URL_BAR_IMAGE_ERROR",payload:Ae.a})})},r=a().firestore.ordered.bars.filter(function(t){return t.id===e});if(console.log(r),r.length&&r[0].available_prizes){var o=r[0].available_prizes,l=ke(o),s=l.split("_");t({type:"SAVE_TYPE_PRIZE",payload:{typePrize:s}}),"common"===s[0]?c.get({collection:"common_prizes",doc:l}).then(function(){n(r[0].photo)}):c.get({collection:"unique_prizes",doc:s[1]}).then(function(){n(r[0].photo)})}else r.length&&!r[0].available_prizes&&(n(r[0].photo),t({type:"SAVE_TYPE_PRIZE",payload:{typePrize:""}}))})}}(r))})}},Re={barImageUrl:null,targetBarId:null,typePrize:""},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_URL_BAR_IMAGE_SUCCESS":case"GET_URL_BAR_IMAGE_ERROR":return Object(E.a)({},e,{barImageUrl:t.payload});case"SAVE_BAR_ID_QUERY":return Object(E.a)({},e,{targetBarId:t.payload.targetBarId});case"SAVE_TYPE_PRIZE":return Object(E.a)({},e,{typePrize:t.payload.typePrize});default:return e}},Ue=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={code:Ie(9999,1e3)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition(function(t){g(t.coords.latitude,t.coords.longitude).then(function(t){e.props.getRandomBar(t.name_id),e.props.changeCity(t.name,t.name_id)})})}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.showBar,n=t.savePromocode,r=t.auth,i=t.bar,c=t.prize,o=t.saveWinningPromocodeInStore;if(e.dataCity.valueCity!==this.props.dataCity.valueCity&&this.props.getRandomBar(this.props.dataCity.valueCity),a!==e.showBar&&a&&c&&c.length>0){var l={bar_id:i.id,code:this.state.code,is_check:!1,name_bar:i.name,photo:i.photo,prize:c.length>0?c[0]:{},qr_code:null};r.uid?n(r.uid,l):o(l)}}},{key:"render",value:function(){var e=this.props,t=e.bar,a=e.auth,n=e.showBar,i=e.prize,c=e.barImageUrl,o=e.backToStartScreen,l=e.reviews,s=this.state.code;return"object"===typeof t&&X(t)&&i?r.a.createElement("div",null,"'\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...'"):!t&&Array.isArray(t)&&t.length<=0?r.a.createElement("div",null,"'\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...'"):t?r.a.createElement(p.a,{unmountOnExit:!0,in:n,timeout:2300,classNames:"b-screen"},r.a.createElement(we,{isAuth:!!a.uid,code:s,qrCode:null,endWorkTime:t.end_work_time,address:t.address,geo:t.geo,name:t.name,prize:i&&Array.isArray(i)&&i.length?i[0]:{},urlImage:c,backToStartScreen:o,reviews:l,barId:t.id})):r.a.createElement("div",null,"'\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...'")}}]),t}(n.Component),Me=Object(Q.compose)(Object(z.firestoreConnect)(function(e){var t=[];return e.bar&&e.bar.id&&t.push({collection:"reviews",doc:e.bar.id}),t}),Object(m.b)(function(e){var t=e.firebase,a=e.firestore,n=e.bars,r=e.users,i=a.ordered.bars&&a.ordered.bars.length>0?a.ordered.bars.filter(function(e){return e.id===n.targetBarId}):{};return console.log(n),{auth:t.auth,bar:Array.isArray(i)?i[0]:i,prize:a.ordered.unique_prizes?a.ordered.unique_prizes.filter(function(e){return e.id===n.typePrize[1]}):null,barImageUrl:n.barImageUrl,reviews:a.ordered.reviews?a.ordered.reviews:[],dataCity:{valueCity:r.valueCity,nameCity:r.nameCity}}},function(e){return{getRandomBar:function(t){return e(Be(t))},savePromocode:function(t,a){return e(T(t,a))},saveWinningPromocodeInStore:function(t){return e(function(e){return function(t){t({type:"SAVE_WINNING_PROMOCODE_IN_STORE",payload:e})}}(t))},changeCity:function(t,a){return e(_(t,a))}}}))(Ue),Pe=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.auth,a=e.location,n=e.bars,i=e.history,c=e.reviews,o=n&&n[a.state.barId]?n[a.state.barId]:{};return r.a.createElement(we,{isAuth:!!t.uid,code:a.state.code,qrCode:a.state.qrCode,endWorkTime:X(o)?"":o.end_work_time,address:X(o)?"":o.address,geo:X(o)?null:o.geo,name:X(o)?"":o.name,prize:a.state.prize,urlImage:a.state.imageUrl,backToStartScreen:function(){return i.goBack()},reviews:c,barId:a.state.barId})}}]),t}(n.Component),De=Object(Q.compose)(Object(z.firestoreConnect)(function(e){var t=e.location.state.barId;return[{collection:"bars",doc:t},{collection:"reviews",doc:t}]}),Object(m.b)(function(e){var t=e.firebase,a=e.firestore;return{auth:t.auth,bars:a.data.bars,reviews:a.ordered.reviews?a.ordered.reviews:[]}}))(Object(b.f)(Pe)),Te=a(49),Ge=a(282),Le=Object(Ge.withNaming)({n:"",e:"__",m:"--",v:"_"}),Fe=Le("sign"),ze=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.link,n=e.title;return r.a.createElement("main",{className:Fe()},r.a.createElement("svg",{className:Fe("bg",{top:!0}),width:"353",height:"202",viewBox:"0 0 353 202",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{clipPath:"url(#clip0)"},r.a.createElement("path",{d:"M5.58143 186.402C-16.7847 207.411 -42.623 207.145 -52.7464 204.386L-155.265 132.124L8.44741 -126.602L371.796 -86.1431C389.379 -90.0134 418.431 -86.5454 393.968 -41.7113C363.389 14.3314 212.039 12.1655 119.967 39.6799C27.8952 67.1944 33.5391 160.141 5.58143 186.402Z",fill:"url(#paint0_linear)",stroke:"#21372A",strokeWidth:"10"})),r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"paint0_linear",x1:"-108.245",y1:"-131.207",x2:"373.566",y2:"209.205",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{stopColor:"#09C883"}),r.a.createElement("stop",{offset:"1",stopColor:"#086A29"})),r.a.createElement("clipPath",{id:"clip0"},r.a.createElement("rect",{width:"353",height:"202",fill:"white"})))),r.a.createElement(D.a,{to:a.to,className:Fe("switchPageBtn")},a.text),r.a.createElement("h1",{className:Fe("heading")},n),t,r.a.createElement(D.a,{className:Fe("backLink"),to:"/"},"\u041d\u0430\u0437\u0430\u0434"),r.a.createElement("svg",{className:Fe("bg",{bottom:!0}),width:"280",height:"173",viewBox:"0 0 280 173",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("g",{clipPath:"url(#clip0)"},r.a.createElement("path",{d:"M118.5 141.5C0.5 158 4.5 173.5 -10 225V254H301.5V7C289.833 8.83333 263.9 17.8 253.5 39C240.5 65.5 236.5 125 118.5 141.5Z",fill:"url(#paint0_linear)",stroke:"#21372A",strokeWidth:"10"})),r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"paint0_linear",x1:"0.279499",y1:"14.9589",x2:"329.654",y2:"160.601",gradientUnits:"userSpaceOnUse"},r.a.createElement("stop",{stopColor:"#09C883"}),r.a.createElement("stop",{offset:"1",stopColor:"#086A29"})),r.a.createElement("clipPath",{id:"clip0"},r.a.createElement("rect",{width:"280",height:"173",fill:"white"})))))}}]),t}(n.Component),We=(a(504),Le("sign")),He=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",firstName:"",lastName:""},a.handleChange=function(e){a.setState(Object(Te.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.signUp(a.state)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props;e.auth,e.authError;return r.a.createElement(ze,{link:{to:"/signin",text:"\u0412\u0445\u043e\u0434"},title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:We("form")},r.a.createElement("div",{className:We("inputGroup")},r.a.createElement("input",{className:We("input"),placeholder:"\u041f\u043e\u0447\u0442\u0430",type:"email",id:"email",onChange:this.handleChange}),r.a.createElement("input",{className:We("input"),placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",onChange:this.handleChange}),r.a.createElement("input",{className:We("input"),placeholder:"\u0418\u043c\u044f",type:"text",id:"firstName",onChange:this.handleChange}),r.a.createElement("input",{className:We("input"),placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",type:"text",id:"lastName",onChange:this.handleChange})),r.a.createElement("button",{type:"submit",className:We("goBtn")},r.a.createElement("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M22 0C9.84995 0 0 9.84995 0 22C0 34.15 9.84995 44 22 44C34.15 44 44 34.15 44 22C44 9.84995 34.15 0 22 0ZM19.5563 10.8953L36.2145 22L19.5563 33.1047V27.1215H7.78554V16.8791H19.5563V10.8953Z",fill:"black"})))))}}]),t}(n.Component),Ze=Object(m.b)(function(e){return{auth:e.firebase.auth}},function(e){return{signUp:function(t){return e(function(e){return function(t,a,n){var r=n.getFirebase,i=n.getFirestore,c=r(),o=i();c.auth().createUserWithEmailAndPassword(e.email,e.password).then(function(n){var r=a().promocodes.promocodeWon;X(r)||t(T(n.user.uid,r));var i={name:a().users.nameCity,name_id:a().users.valueCity};return o.collection("users").doc(n.user.uid).set({firstName:e.firstName,lastName:e.lastName,initials:"".concat(e.firstName[0]).concat(e.lastName[0]),default_city:i,photo:null})}).then(function(){t({type:"SIGNUP_SUCCESS"}),v.push("/")}).catch(function(e){t({type:"SIGNUP_ERROR",payload:e}),alert("\u041e\u0448\u0438\u0431\u043a\u0430, \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a")})}}(t))}}})(He),qe=(a(505),Le("sign")),Ye=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.handleChange=function(e){a.setState(Object(Te.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.signIn(a.state)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return console.log(this.props.authError),r.a.createElement(ze,{link:{to:"/signup",text:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"},title:"\u0412\u0445\u043e\u0434"},r.a.createElement(n.Fragment,null,r.a.createElement("form",{onSubmit:this.handleSubmit,className:qe("form")},r.a.createElement("div",{className:qe("inputGroup")},r.a.createElement("input",{className:qe("input"),type:"email",id:"email",placeholder:"\u041f\u043e\u0447\u0442\u0430",onChange:this.handleChange}),r.a.createElement("input",{className:qe("input"),type:"password",id:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:this.handleChange})),r.a.createElement("button",{type:"submit",className:qe("goBtn")},r.a.createElement("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M22 0C9.84995 0 0 9.84995 0 22C0 34.15 9.84995 44 22 44C34.15 44 44 34.15 44 22C44 9.84995 34.15 0 22 0ZM19.5563 10.8953L36.2145 22L19.5563 33.1047V27.1215H7.78554V16.8791H19.5563V10.8953Z",fill:"black"}))))))}}]),t}(n.Component),Qe=Object(m.b)(function(e){return{authError:e.auth.authError}},function(e){return{signIn:function(t){return e((a=t,function(e,t,n){(0,n.getFirebase)().auth().signInWithEmailAndPassword(a.email,a.password).then(function(a){e({type:"LOGIN_SUCCESS"}),v.push("/");var n=t().promocodes.promocodeWon;X(n)||e(T(a.user.uid,n))}).catch(function(t){e({type:"LOGIN_ERROR",payload:t}),alert("\u041e\u0448\u0438\u0431\u043a\u0430, \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a")})}));var a}}})(Ye),Ve=a(283),Xe=a.n(Ve),Je=(a(506),a(284)),Ke=a.n(Je),$e=(a(507),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"desktop-screen"},r.a.createElement("div",{className:"desktop-screen__center"},r.a.createElement("img",{className:"desktop-screen__logo-main",src:Ke.a,alt:"BeerCoin"}),r.a.createElement("div",{className:"desktop-screen__left"},r.a.createElement("img",{className:"desktop-screen__img",src:Xe.a,alt:""})),r.a.createElement("div",{className:"desktop-screen__right"},r.a.createElement("h1",{className:"desktop-screen__h1"},"\u041f\u043e\u0434\u043a\u0438\u043d\u044c \u043c\u043e\u043d\u0435\u0442\u043a\u0443 \u0438 \u043f\u0435\u0439 \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e!"),r.a.createElement("h2",{className:"desktop-screen__h2"},"\u0417\u0430\u043a\u0440\u0443\u0442\u0438 \u0441\u0432\u043e\u044e \u0443\u0434\u0430\u0447\u0443 \u0438 \u043f\u043e\u043b\u0443\u0447\u0438 \u0441\u043a\u0438\u0434\u043a\u0443 \u0432 \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e\u043c \u0431\u0430\u0440\u0435."),r.a.createElement("h3",{className:"desktop-screen__go-to"},"\u041e\u0442\u043a\u0440\u043e\u0439 \u043d\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0435")))))}}]),t}(n.Component)),et=a(108);a(545),a(508),a(510),a(546);et.initializeApp({apiKey:"AIzaSyDaLdkt15q132Hb88jIVYYPOrfnUaBJHv8",authDomain:"beercoin12.firebaseapp.com",databaseURL:"https://beercoin12.firebaseio.com",projectId:"beercoin12",storageBucket:"beercoin12.appspot.com",messagingSenderId:"127473982008",appId:"1:127473982008:web:4b5d01f7d85f7f477c24cd",measurementId:"G-RM52L3SW37"}),et.firestore().settings({timestampsInSnapshots:!0});var tt=et,at=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={addBar_id:"",addBar_address:"",addBar_end_work_time:"",addBar_latitude:"",addBar_longtitude:"",addBar_name:"",addBar_photo:"",addBar_city:"",addBar_id_city:""},a.addBar=function(e){e.preventDefault(),a.props.addBarAdmin("bars",a.state.addBar_id,{address:a.state.addBar_address,end_work_time:a.state.addBar_end_work_time,geo:new tt.firestore.GeoPoint(+a.state.addBar_latitude,+a.state.addBar_longtitude),name:a.state.addBar_name,photo:a.state.addBar_photo}),a.props.addBarIdAdmin("bars_id",a.state.addBar_id_city,{bar_id:a.state.addBar_id,geo:new tt.firestore.GeoPoint(+a.state.addBar_latitude,+a.state.addBar_longtitude)})},a.handleInputChange=function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,r=t.name;a.setState(Object(Te.a)({},r,n))},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("section",null,r.a.createElement("h1",null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0431\u0430\u0440"),r.a.createElement("a",{href:"http://joxi.ru/Q2KYQqWCLRxe9r",target:"_blank"},"\u041f\u0440\u0438\u043c\u0435\u0440 API"),r.a.createElement("form",{onSubmit:this.addBar},r.a.createElement("div",null,r.a.createElement("label",null,"Id \u0431\u0430\u0440\u0430"),r.a.createElement("input",{name:"addBar_id",value:this.state.addBar_id,onChange:this.handleInputChange})),r.a.createElement("div",null,r.a.createElement("label",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430"),r.a.createElement("input",{name:"addBar_city",value:this.state.addBar_city,onChange:this.handleInputChange})),r.a.createElement("div",null,r.a.createElement("label",null,"Id \u0433\u043e\u0440\u043e\u0434\u0430 (\u043a\u0430\u043a \u0432 option \u043f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435)"),r.a.createElement("input",{name:"addBar_id_city",value:this.state.addBar_id_city,onChange:this.handleInputChange})),r.a.createElement("div",null,r.a.createElement("label",null,"\u0410\u0434\u0440\u0435\u0441"),r.a.createElement("input",{name:"addBar_address",value:this.state.addBar_address,onChange:this.handleInputChange})),r.a.createElement("div",null,r.a.createElement("label",null,"\u0412\u0440\u0435\u043c\u044f \u0437\u0430\u043a\u0440\u044b\u0442\u0438\u044f"),r.a.createElement("input",{name:"addBar_end_work_time",value:this.state.addBar_end_work_time,onChange:this.handleInputChange})),r.a.createElement("div",null,r.a.createElement("label",null,"Geo"),r.a.createElement("input",{name:"addBar_latitude",placeholder:"\u0428\u0438\u0440\u043e\u0442\u0430",value:this.state.addBar_latitude,onChange:this.handleInputChange}),r.a.createElement("input",{name:"addBar_longtitude",placeholder:"\u0414\u043e\u043b\u0433\u043e\u0442\u0430",value:this.state.addBar_longtitude,onChange:this.handleInputChange})),r.a.createElement("div",null,r.a.createElement("label",null,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),r.a.createElement("input",{name:"addBar_name",value:this.state.addBar_name,onChange:this.handleInputChange})),r.a.createElement("div",null,r.a.createElement("label",null,"\u0424\u043e\u0442\u043e"),r.a.createElement("input",{name:"addBar_photo",value:this.state.addBar_photo,onChange:this.handleInputChange})),r.a.createElement("button",{type:"submit"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))))}}]),t}(n.Component),nt=Object(m.b)(null,function(e){return{addBarAdmin:function(t,a,n){return e(function(e,t,a){return function(n,r,i){i.getFirebase,(0,i.getFirestore)().collection(e).doc(t).set(a)}}(t,a,n))},addBarIdAdmin:function(t,a,n){return e(function(e,t,a){return function(n,r,i){i.getFirebase;var c=(0,i.getFirestore)();c.get({collection:e,doc:t}).then(function(){var n=r().firestore.ordered.bars_id.filter(function(e){return e.id===t}),i=[].concat(Object(ye.a)(n[0].content),[Object(E.a)({},a)]);c.collection(e).doc(t).set({content:i})})}}(t,a,n))}}})(at),rt=(a(513),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={isStopFlipping:!1,showBar:!1},a.stopFlipping=function(){a.setState({isStopFlipping:!0})},a.backToStartScreen=function(){a.setState({isStopFlipping:!1,showBar:!1})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition(function(t){g(t.coords.latitude,t.coords.longitude).then(function(t){e.props.changeCity(t.name,t.name_id)})})}},{key:"componentDidUpdate",value:function(e){this.props.auth.isEmpty||!this.props.userData.length||e.userData||this.props.changeCity(this.props.userData[0].default_city.name,this.props.userData[0].default_city.name_id)}},{key:"render",value:function(){var e=this,t=this.props.auth,a=this.state,i=a.isStopFlipping,c=a.showBar;return console.log(t),r.a.createElement(b.b,{history:v},r.a.createElement("div",{className:"App"},h.isMobile?r.a.createElement(b.c,null,r.a.createElement(b.a,{exact:!0,path:"/"},r.a.createElement(n.Fragment,null,r.a.createElement(p.a,{unmountOnExit:!0,in:!i,timeout:500,classNames:"b-screen",onExited:function(){return e.setState({showBar:!0})}},r.a.createElement(n.Fragment,null,r.a.createElement(te,{stopFlipping:this.stopFlipping}))),r.a.createElement(Me,{showBar:c,backToStartScreen:this.backToStartScreen}))),r.a.createElement(b.a,{path:"/signup",component:Ze}),r.a.createElement(b.a,{path:"/signin",component:Qe}),r.a.createElement(b.a,{path:"/promocode/:id",component:De}),"RVf4AoGwwxVq0X0YnQeTlpykzpE2"===t.uid?r.a.createElement(b.a,{path:"/admin",component:nt}):null):r.a.createElement($e,null)))}}]),t}(n.Component)),it=Object(m.b)(function(e){var t=e.firebase,a=e.firestore;return{auth:t.auth,userData:!!a.ordered.users&&!!a.ordered.users.length&&a.ordered.users.filter(function(e){return t.auth.uid===e.id})}},function(e){return{changeCity:function(t,a){return e(_(t,a))}}})(rt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ct=a(286),ot=a(109),lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(Q.combineReducers)({promocodes:F,auth:K,bars:xe,users:y,firestore:ot.firestoreReducer,firebase:z.firebaseReducer});return Object(Q.createStore)(t,e,Object(Q.compose)(Object(Q.applyMiddleware)(ct.a.withExtraArgument({getFirebase:z.getFirebase,getFirestore:ot.getFirestore})),Object(z.reactReduxFirebase)(tt,{attachAuthIsReady:!0}),Object(ot.reduxFirestore)(tt)))}();lt.firebaseAuthIsReady.then(function(){c.a.render(r.a.createElement(m.a,{store:lt},r.a.createElement(it,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})})}},[[289,1,2]]]);
//# sourceMappingURL=main.1310d2f6.chunk.js.map